{
  "version": 3,
  "sources": ["../../rubiks-js/src/ui/camera.js", "../../rubiks-js/src/ui/rubiks.js", "../../rubiks-js/src/ui/ray.js", "../../rubiks-js/src/ui/inputHandler.js", "../../rubiks-js/src/ui/debugger.js", "../../rubiks-js/src/shaders/facelet.glsl.js", "../../rubiks-js/src/events.js", "../../rubiks-js/src/rubiksCube.js", "../../rubiks-js/src/index.js"],
  "sourcesContent": ["import {V2, V3, V4} from '../math/vector'\r\nimport {M44} from '../math/matrix'\r\n\r\nexport class Camera {\r\n  /** @type {V3} */\r\n  #position\r\n  /** @type {V3} */\r\n  #lookAt\r\n  /** @type {V3} */\r\n  #forward\r\n  /** @type {V3} */\r\n  #right\r\n  /** @type {V3} */\r\n  #up\r\n\r\n  /** @type {number} */\r\n  #fov\r\n  /** @type {number} */\r\n  #aspect\r\n  /** @type {number} */\r\n  #width\r\n  /** @type {number} */\r\n  #height\r\n  /** @type {number} */\r\n  #near\r\n  /** @type {number} */\r\n  #far\r\n\r\n  /** @type {M44} */\r\n  #projectionMatrix\r\n  /** @type {M44} */\r\n  #worldToCameraMatrix\r\n  /** @type {M44} */\r\n  #projectionMatrixInverse\r\n  /** @type {M44} */\r\n  #cameraToWorldMatrix\r\n  /** @type {M44} */\r\n  #worldProjectionMatrix\r\n\r\n  /**\r\n   * @param {V3} position\r\n   * @param {V3} lookAt\r\n   * @param {V3} up\r\n   * @param {number} fov\r\n   * @param {number} width\r\n   * @param {number} height\r\n   * @param {number} near\r\n   * @param {number} far\r\n   */\r\n  constructor(position, lookAt, up, fov, width, height, near, far) {\r\n    this.#position = position\r\n    this.#lookAt = lookAt\r\n    this.#up = up\r\n\r\n    this.#fov = fov\r\n    this.#width = width\r\n    this.#height = height\r\n    this.#aspect = width / height\r\n    this.#near = near\r\n    this.#far = far\r\n\r\n    this.calcCameraDirections()\r\n    this.calcWorldToCameraMatrix()\r\n    this.calcProjectionMatrix()\r\n  }\r\n\r\n  /** @param {V3} value */\r\n  set position(value) {\r\n    this.#position = value\r\n    this.calcCameraDirections()\r\n    this.calcWorldToCameraMatrix()\r\n  }\r\n  /** @param {V3} value */\r\n  set lookAt(value) {\r\n    this.#lookAt = value\r\n    this.calcCameraDirections()\r\n    this.calcWorldToCameraMatrix()\r\n  }\r\n  /** @param {V3} value */\r\n  set up(value) {\r\n    this.#up = value\r\n    this.calcCameraDirections()\r\n    this.calcWorldToCameraMatrix()\r\n  }\r\n  get position() {\r\n    return this.#position\r\n  }\r\n  get lookAt() {\r\n    return this.#lookAt\r\n  }\r\n  get up() {\r\n    return this.#up\r\n  }\r\n  get forward() {\r\n    return this.#forward\r\n  }\r\n  get right() {\r\n    return this.#right\r\n  }\r\n\r\n  /** @param {number} value */\r\n  set fov(value) {\r\n    this.#fov = value\r\n    this.calcProjectionMatrix()\r\n  }\r\n  /** @param {number} value */\r\n  set near(value) {\r\n    this.#near = value\r\n    this.calcProjectionMatrix()\r\n  }\r\n  /** @param {number} value */\r\n  set far(value) {\r\n    this.#far = value\r\n    this.calcProjectionMatrix()\r\n  }\r\n  get fov() {\r\n    return this.#fov\r\n  }\r\n  get aspect() {\r\n      return this.#aspect\r\n  }\r\n  get near() {\r\n    return this.#near\r\n  }\r\n  get far() {\r\n    return this.#far\r\n  }\r\n  get width() {\r\n    return this.#width\r\n  }\r\n  get height() {\r\n    return this.#height\r\n  }\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  screenSize(width, height) {\r\n    this.#width = width\r\n    this.#height = height\r\n    this.#aspect = width / height\r\n    this.calcProjectionMatrix()\r\n  }\r\n\r\n\r\n  get projectionMatrix() {\r\n    return this.#projectionMatrix\r\n  }\r\n  get projectionMatrixInverse() {\r\n    return this.#projectionMatrixInverse\r\n  }\r\n  get worldToCameraMatrix() {\r\n    return this.#worldToCameraMatrix\r\n  }\r\n  get cameraToWorldMatrix() {\r\n    return this.#cameraToWorldMatrix\r\n  }\r\n  get worldProjectionMatrix() {\r\n    return this.#worldProjectionMatrix\r\n  }\r\n\r\n  /** @param {V3} v */\r\n  worldToScreen({x, y, z}) {\r\n    const point4d = this.worldProjectionMatrix.mult(new V4(x, y, z, 1))\r\n    const screenPoint = point4d.toV3().scale(1 / point4d.w).toV2().add(new V2(1, 1)).scale(.5).mult(new V2(this.width, this.height))\r\n    return screenPoint\r\n  }\r\n  // worldDirectionToScreen({x, y, z}: V3) {\r\n  //   // const rotationTransform = this.cameraToWorldMatrix.transpose\r\n  //   const cameraPoint = this.worldToCameraMatrix.mult(new V4(x, y, z, 1))\r\n  //   const projectedPoint = this.projectionMatrix.mult(cameraPoint)\r\n  //   const viewportPoint = projectedPoint.toV3().scale(1 / projectedPoint.w).toV2()\r\n  //   const screenPoint = viewportPoint.add(new V2(1, 1)).scale(.5).mult(new V2(this.width, this.height))\r\n  //   // console.log(this.projectionMatrix)\r\n  //   console.table({cameraPoint, projectedPoint, viewportPoint, screenPoint})\r\n  //   return screenPoint\r\n  // }\r\n\r\n\r\n  calcProjectionMatrix() {\r\n    this.#projectionMatrix = M44.perspective(this.#fov * Math.PI / 180, this.#aspect, this.#near, this.#far)\r\n    this.#projectionMatrixInverse = this.#projectionMatrix.inverse\r\n    this.#worldProjectionMatrix = this.#projectionMatrix?.mult(this.#worldToCameraMatrix)\r\n  }\r\n  calcWorldToCameraMatrix() {\r\n    this.#worldToCameraMatrix = M44.lookAt(this.#position, this.#lookAt, this.#up)\r\n    this.#cameraToWorldMatrix = this.#worldToCameraMatrix.inverse\r\n    this.#worldProjectionMatrix = this.#projectionMatrix?.mult(this.#worldToCameraMatrix)\r\n  }\r\n  calcCameraDirections() {\r\n    this.#forward = this.#lookAt.sub(this.#position).normalized\r\n    this.#right = this.#up.cross(this.#forward).normalized\r\n  }\r\n}", "import {V3} from '../math/vector'\r\nimport {Quaternion} from '../math/quarternion'\r\nimport {lerp, mod} from '../math/utils'\r\n\r\nimport {Cubie} from './cubie'\r\nimport {Transform} from './transform'\r\nimport {uvsTransformerPresets, sidesShiftMapper} from './uvs'\r\n\r\n// magic values\r\nconst rotationAxis = [\r\n  V3.getRotationAxis(0),\r\n  V3.getRotationAxis(1),\r\n  V3.getRotationAxis(2)\r\n]\r\n\r\n/**\r\n * `cubeRotationOnMiddle[axis][side]`\r\n * @type {Record<number, Record<number, number>>}\r\n */\r\nconst cubeRotationOnMiddle = {\r\n  0: {\r\n    2: 90, 3: -90,\r\n    4: -90, 5: 90\r\n  },\r\n  1: {\r\n    0: -90, 1: 90,\r\n    4: 90, 5: -90\r\n  },\r\n  2: {\r\n    0: 90, 1: -90,\r\n    2: -90, 3: 90\r\n  }\r\n}\r\n\r\n/**\r\n * `uvsTransformers[axis][side][angle]`\r\n * @type {Record<number, Record<number, Record<number, (uvs: number[]) => number[]>>>}\r\n */\r\nconst uvsTransformers = {\r\n  0: {\r\n    0: uvsTransformerPresets.rcR2Rcc,\r\n    1: uvsTransformerPresets.rcR2Rcc,\r\n    2: uvsTransformerPresets.flipV23,\r\n    3: uvsTransformerPresets.flipV23,\r\n    4: uvsTransformerPresets.flipV12,\r\n    5: uvsTransformerPresets.flipV12\r\n  },\r\n  1: {\r\n    0: uvsTransformerPresets.rcfhFvRcc,\r\n    1: uvsTransformerPresets.rcfhFvRcc,\r\n    2: uvsTransformerPresets.rcR2Rcc,\r\n    3: uvsTransformerPresets.rcR2Rcc,\r\n    4: uvsTransformerPresets.rcFhRcfh,\r\n    5: uvsTransformerPresets.rcFhRcfh\r\n  },\r\n  2: {\r\n    0: uvsTransformerPresets.flipH23,\r\n    1: uvsTransformerPresets.flipH23,\r\n    2: uvsTransformerPresets.flipH12,\r\n    3: uvsTransformerPresets.flipH12,\r\n    4: uvsTransformerPresets.rcR2Rcc,\r\n    5: uvsTransformerPresets.rcR2Rcc\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @param {number} axis\r\n * @param {number} side\r\n * @returns {boolean}\r\n */\r\nconst shouldInvertAngle = (axis, side) => {\r\n  return (\r\n    side === 0 ||\r\n    side === 2 && axis === 0 ||\r\n    side === 3 && axis === 2 ||\r\n    side === 5\r\n  )\r\n}\r\n\r\n\r\n/**\r\n * @extends {Transform<Cubie, null>}\r\n */\r\nexport class RubiksTransform extends Transform {\r\n  /** @type {[V3, V3, V3]} */\r\n  rotationAxis\r\n\r\n  /**\r\n   * @param {V3} position\r\n   * @param {Quaternion} rotation\r\n   */\r\n  constructor(position, rotation) {\r\n    super(position, rotation, null)\r\n    this.setTransforms()\r\n  }\r\n\r\n  /** @property */\r\n  setTransforms() {\r\n    super.setTransforms()\r\n\r\n    this.rotationAxis = /** @type {[V3, V3, V3]} */ (rotationAxis\r\n      .map(axis => {\r\n        return this.apply(axis)\r\n      }))\r\n  }\r\n}\r\n\r\n/** @typedef {(event: import('../types').AIA) => void} TurnCallback */\r\n\r\nexport class Rubiks {\r\n  /** @type {RubiksTransform} */\r\n  transform\r\n  /** @type {Cubie[]} */\r\n  cubies\r\n  /** @type {TurnCallback} */\r\n  #turnCallback\r\n\r\n  /**\r\n   * @param {Quaternion} rotation\r\n   * @param {number[][][]} uvs\r\n   * @param {V3[]} hoveringColors\r\n   * @param {TurnCallback} turnCallback\r\n   */\r\n  constructor(rotation, uvs, hoveringColors, turnCallback) {\r\n    this.#turnCallback = turnCallback\r\n    this.transform = new RubiksTransform(V3.zero, rotation)\r\n\r\n    this.cubies = []\r\n\r\n    for (let i = 0; i < 27; i++) {\r\n      const cubie = new Cubie(\r\n        i,\r\n        uvs,\r\n        hoveringColors,\r\n        this\r\n      )\r\n      this.cubies.push(cubie)\r\n      this.transform.children.push(cubie)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {import('./program').Program} program\r\n   * @param {WebGL2RenderingContext} gl\r\n   * @param {WebGLBuffer} uvsVbo\r\n   */\r\n  render(program, gl, uvsVbo) {\r\n    this.cubies.forEach(cubie => cubie.render(program, gl, uvsVbo))\r\n  }\r\n\r\n  /** @type {[number, number][]} */\r\n  static #axisDeltasMap = [\r\n    [3, 9],\r\n    [1, 9],\r\n    [1, 3]\r\n  ]\r\n  /**\r\n   * @param {number} axis\r\n   * @param {number} index\r\n   * @returns {Cubie[]}\r\n   */\r\n  getPlane(axis, index) {\r\n    const [d1, d2] = Rubiks.#axisDeltasMap[axis]\r\n    const initial = Math.pow(3, axis) * index\r\n\r\n    /** @type {Cubie[]} */\r\n    const cubies = []\r\n    for (let i = 0; i < 3; i++) {\r\n      for (let j = 0; j < 3; j++) {\r\n        const index = initial + i * d1 + j * d2\r\n        const cubie = this.cubies[index]\r\n        cubies.push(cubie)\r\n      }\r\n    }\r\n    return cubies\r\n  }\r\n\r\n  /**\r\n * @param {number} axis\r\n * @param {number} index\r\n * @param {number} angle\r\n * @param {number} side\r\n * @param {Cubie[]} plane\r\n */\r\n  #turn(axis, index, angle, side, plane) {\r\n    angle = mod(angle, 4)\r\n    if (angle === 0) {\r\n      return\r\n    }\r\n\r\n    if (index === 1) {\r\n      this.#turn(axis, 0, -angle, side, this.getPlane(axis, 0))\r\n      this.#turn(axis, 2, -angle, side, this.getPlane(axis, 2))\r\n      this.transform.rotate(this.transform.rotationAxis[axis], angle * cubeRotationOnMiddle[axis][side])\r\n      return\r\n    }\r\n\r\n    if (shouldInvertAngle(axis, side)) {\r\n      angle = mod(-angle, 4)\r\n    }\r\n\r\n    this.#swapOuterFacelets(plane, axis, angle)\r\n    this.#swapInnerFacelets(plane, axis, index, angle)\r\n    \r\n    this.#turnCallback({axis, index, angle})\r\n  }\r\n  /**\r\n   * @param {Cubie[]} plane\r\n   * @param {number} axis\r\n   * @param {number} angle\r\n   */\r\n  #swapOuterFacelets(plane, axis, angle) {\r\n    const [s0, s1, s2, s3] = sidesShiftMapper[axis]\r\n    \r\n    const facelets = [\r\n      plane[0].getFaceletOfSide(s0),\r\n      plane[1].getFaceletOfSide(s0),\r\n      plane[2].getFaceletOfSide(s0),\r\n      plane[2].getFaceletOfSide(s1),\r\n      plane[5].getFaceletOfSide(s1),\r\n      plane[8].getFaceletOfSide(s1),\r\n      plane[8].getFaceletOfSide(s2),\r\n      plane[7].getFaceletOfSide(s2),\r\n      plane[6].getFaceletOfSide(s2),\r\n      plane[6].getFaceletOfSide(s3),\r\n      plane[3].getFaceletOfSide(s3),\r\n      plane[0].getFaceletOfSide(s3)\r\n    ]\r\n\r\n    /** @type {number[][]} */\r\n    const shiftedUvs = []\r\n\r\n    for (let index = 0; index < 12; index++) {\r\n      const shiftedIndex = mod(index + 3 * angle, 12)\r\n      const {uvs} = facelets[shiftedIndex]\r\n\r\n      const facelet = facelets[index]\r\n      const transformer = uvsTransformers[axis][facelet.side][angle]\r\n      shiftedUvs[index] = transformer(uvs)\r\n    }\r\n\r\n    for (let index = 0; index < 12; index++) {\r\n      facelets[index].uvs = shiftedUvs[index]\r\n    }\r\n  }\r\n  /**\r\n   * @param {Cubie[]} plane\r\n   * @param {number} axis\r\n   * @param {number} index\r\n   * @param {number} angle\r\n   */\r\n  #swapInnerFacelets(plane, axis, index, angle) {\r\n    const side = axis * 2 + Math.sign(index)\r\n\r\n    const facelets = [\r\n      plane[0].getFaceletOfSide(side),\r\n      plane[1].getFaceletOfSide(side),\r\n      plane[2].getFaceletOfSide(side),\r\n      plane[5].getFaceletOfSide(side),\r\n      plane[8].getFaceletOfSide(side),\r\n      plane[7].getFaceletOfSide(side),\r\n      plane[6].getFaceletOfSide(side),\r\n      plane[3].getFaceletOfSide(side)\r\n    ]\r\n\r\n    /** @type {number[][]} */\r\n    const shiftedUvs = []\r\n    const transformer = uvsTransformers[axis][side][angle]\r\n\r\n    for (let index = 0; index < 8; index++) {\r\n      const shiftedIndex = mod(index + 2 * angle, 8)\r\n      const {uvs} = facelets[shiftedIndex]\r\n      shiftedUvs[index] = transformer(uvs)\r\n    }\r\n\r\n    for (let index = 0; index < 8; index++) {\r\n      facelets[index].uvs = shiftedUvs[index]\r\n    }\r\n    \r\n    const center = plane[4].getFaceletOfSide(side)\r\n    center.uvs = transformer(center.uvs)\r\n  }\r\n\r\n  // manual rotation\r\n\r\n  /** @type {Array<{cubie: Cubie, backupPosition: V3, backupRotation: Quaternion, directionFromCenter: V3}>} */\r\n  #rotatingCubies = []\r\n  #rotationAxis = V3.zero\r\n  #rotationCenter = V3.zero\r\n  #currentAngle = 0\r\n  \r\n  /**\r\n   * @param {Cubie[]} cubies\r\n   * @param {V3} axis\r\n   */\r\n  startRotation(cubies, axis) {\r\n    this.#rotationAxis = axis\r\n    this.#rotationCenter = cubies[4].transform.position\r\n    this.#rotatingCubies = cubies.map(cubie => {\r\n      return {\r\n        cubie,\r\n        backupPosition: cubie.transform.position,\r\n        backupRotation: cubie.transform.rotation,\r\n        directionFromCenter: cubie.transform.position.sub(this.#rotationCenter)\r\n      }\r\n    })\r\n  }\r\n  \r\n  /** @param {number} angle */\r\n  rotateManual(angle) {\r\n    const rotation = Quaternion.fromAngle(this.#rotationAxis, -angle)\r\n    this.#currentAngle = angle\r\n    this.#rotatingCubies.forEach(({cubie, backupRotation, directionFromCenter}) => {\r\n      const rotatedDirectionFromCenter = rotation.rotate(directionFromCenter)\r\n      const newPosition = this.#rotationCenter.add(rotatedDirectionFromCenter)\r\n      cubie.transform.position = newPosition\r\n      cubie.transform.rotation = backupRotation\r\n      cubie.transform.rotate(this.#rotationAxis, angle)\r\n    })\r\n  }\r\n  \r\n  // automatic rotation\r\n  #initialAngle = 0\r\n  #rotatingAutomatic = false\r\n  #turnProgress = 0\r\n  #turnSpeed = 4\r\n  #targetAngle = 0\r\n  #rotationIndex = 0\r\n  #rotationAxisIndex = 0\r\n  #side = 0\r\n\r\n  /**\r\n   * @param {number} axis\r\n   * @param {number} index\r\n   * @param {number} angle\r\n   * @param {number} side\r\n   */\r\n  finishRotation(axis, index, angle, side) {\r\n    this.#rotatingAutomatic = true\r\n    this.#turnProgress = 0\r\n    this.#targetAngle = angle\r\n    this.#initialAngle = this.#currentAngle\r\n    this.#rotationIndex = index\r\n    this.#rotationAxisIndex = axis\r\n    this.#side = side\r\n  }\r\n\r\n  /** @param {number} delta */\r\n  update(delta) {\r\n    if (!this.#rotatingAutomatic) {\r\n      return\r\n    }\r\n\r\n    this.#turnProgress += delta * this.#turnSpeed\r\n    if (this.#turnProgress >= 1) {\r\n      this.#rotatingAutomatic = false\r\n      this.#rotatingCubies.forEach(({cubie, backupPosition, backupRotation}) => {\r\n        cubie.transform.position = backupPosition\r\n        cubie.transform.rotation = backupRotation\r\n      })\r\n      this.#turn(\r\n        this.#rotationAxisIndex,\r\n        this.#rotationIndex,\r\n        this.#targetAngle,\r\n        this.#side,\r\n        this.#rotatingCubies.map(({cubie}) => cubie)\r\n      )\r\n      return\r\n    }\r\n\r\n    const currentAngle = lerp(this.#initialAngle, this.#targetAngle * 90, this.#turnProgress)\r\n    const rotation = Quaternion.fromAngle(this.#rotationAxis, -currentAngle)\r\n    this.#rotatingCubies.forEach(({cubie, backupRotation, directionFromCenter}) => {\r\n      cubie.transform.rotation = backupRotation.mult(Quaternion.fromAngle(this.#rotationAxis, currentAngle))\r\n      const rotatedDirectionFromCenter = rotation.rotate(directionFromCenter)\r\n      const newPosition = this.#rotationCenter.add(rotatedDirectionFromCenter)\r\n      cubie.transform.position = newPosition\r\n    })\r\n  }\r\n\r\n  get isTurning() {\r\n    return this.#rotatingAutomatic\r\n  }\r\n\r\n}", "import {V3, V4} from '../math/vector'\r\n\r\nexport class Ray {\r\n  /** @type {V3} */\r\n  #origin\r\n  /** @type {V3} */\r\n  #direction\r\n\r\n  /**\r\n   * @param {import('./camera').Camera} camera\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  constructor(camera, x, y, width, height) {\r\n    const u = (x + .5) / width * 2 - 1\r\n    const v = (height - y + .5) / height * 2 - 1\r\n    this.#origin = camera.cameraToWorldMatrix.mult(new V4(0, 0, 0, 1)).toV3()\r\n\r\n    const d1 = camera.projectionMatrixInverse.mult(new V4(u, v, 0, 1))\r\n    const d2 = camera.cameraToWorldMatrix.mult(new V4(d1.x, d1.y, d1.z, 0))\r\n    this.#direction = d2.toV3().normalized\r\n  }\r\n\r\n  /** @param {import('./rubiks').Rubiks} rubiks */\r\n  intersectRubiks(rubiks) {\r\n    return rubiks.cubies.map(cubie => this.#intersectCube(cubie)).flat(1)\r\n  }\r\n\r\n  /** @param {import('./cubie').Cubie} cubie */\r\n  #intersectCube(cubie) {\r\n    return cubie.facelets.reduce((\r\n      /** @type {{facelet: import('./facelet').Facelet, d: number}[]} */ acc,\r\n      /** @type {import('./facelet').Facelet} */ facelet\r\n    ) => {\r\n      const hit = this.intersectFacelet(facelet)\r\n      if (hit.inside) {\r\n        acc.push({facelet: hit.facelet, d: hit.d})\r\n      }\r\n      return acc\r\n    }, [])\r\n  }\r\n\r\n  /**\r\n   * @param {import('./facelet').Facelet} facelet\r\n   * @returns {{\r\n   *  inside: false\r\n   * } | {\r\n   *  inside: true,\r\n   *  facelet: import('./facelet').Facelet,\r\n   *  d: number\r\n   * }}\r\n   */\r\n  intersectFacelet(facelet) {\r\n    const {normal, top, left, topLeft, bottomRight} = facelet.transform\r\n\r\n    const denom = this.#direction.dot(normal)\r\n    if (denom === 0) {\r\n      return {inside: false}\r\n    }\r\n    \r\n    const d = topLeft.sub(this.#origin).dot(normal) / denom\r\n    const intersection = this.#origin.add(this.#direction.scale(d))\r\n    const fromTopLeft = intersection.sub(topLeft).normalized\r\n    const fromBottomRight = intersection.sub(bottomRight).normalized\r\n\r\n    const dot1 = fromTopLeft.dot(left)\r\n    const dot2 = fromTopLeft.dot(top)\r\n    const dot3 = fromBottomRight.dot(left.negate)\r\n    const dot4 = fromBottomRight.dot(top.negate)\r\n    const inside = dot1 <= 1 && dot1 >= 0\r\n                && dot2 <= 1 && dot2 >= 0\r\n                && dot3 <= 1 && dot3 >= 0\r\n                && dot4 <= 1 && dot4 >= 0\r\n\r\n    if (!inside) {\r\n      return {inside: false}\r\n    }\r\n\r\n    return {\r\n      inside,\r\n      facelet,\r\n      d\r\n    }\r\n  }\r\n}", "import {Ray} from './ray'\r\n// import debug from './debugger'\r\n\r\nimport {V2, V3} from '../math/vector'\r\nimport {clamp} from '../math/utils'\r\n\r\n\r\nexport class InputHandler {\r\n  /** @type {HTMLCanvasElement} */\r\n  #canvas\r\n  /** @type {import('./rubiks').Rubiks} */\r\n  #rubiks\r\n  /** @type {import('./camera').Camera} */\r\n  #camera\r\n  /** @readonly */\r\n  #maxZoom = 40\r\n  /** @readonly */\r\n  #minZoom = 10\r\n\r\n  /**\r\n   * @param {HTMLCanvasElement} canvas\r\n   * @param {import('./rubiks').Rubiks} rubiks\r\n   * @param {import('./camera').Camera} camera\r\n   */\r\n  constructor(canvas, rubiks, camera) {\r\n    this.#canvas = canvas\r\n    this.#rubiks = rubiks\r\n    this.#camera = camera\r\n  }\r\n\r\n  addEventListeners() {\r\n    this.#canvas.addEventListener('pointermove', this.#pointerMove)\r\n    this.#canvas.addEventListener('pointerdown', this.#pointerDown)\r\n    this.#canvas.addEventListener('pointerup', this.#pointerUp)\r\n    this.#canvas.addEventListener('pointerleave', this.#pointerLeave)\r\n    this.#canvas.addEventListener('wheel', this.#wheel)\r\n  }\r\n\r\n  removeEventListeners() {\r\n    this.#canvas.removeEventListener('pointermove', this.#pointerMove)\r\n    this.#canvas.removeEventListener('pointerdown', this.#pointerDown)\r\n    this.#canvas.removeEventListener('pointerup', this.#pointerUp)\r\n    this.#canvas.removeEventListener('pointerleave', this.#pointerLeave)\r\n    this.#canvas.removeEventListener('wheel', this.#wheel)\r\n  }\r\n\r\n\r\n  /** @type {Map<number, PointerEvent>} */\r\n  #pointers = new Map()\r\n  /** @type {import('../types').Action} */\r\n  #action = {type: 'none'}\r\n\r\n  /** @param {import('../types').Action} action */\r\n  #setAction(action) {\r\n    if (this.#action.type === 'hovering') {\r\n      this.#action.facelet.hovering = false\r\n    }\r\n    if (action.type === 'hovering') {\r\n      action.facelet.hovering = true\r\n    }\r\n    if (this.#action.type === 'rotatingSide' && this.#action.side) {\r\n      const info = this.#action[this.#action.side]\r\n      const angle = Math.round(info.angle / 90)\r\n      this.#rubiks.finishRotation(info.axis, info.index, angle, this.#action.facelet.side)\r\n    }\r\n    this.#action = action\r\n  }\r\n\r\n  // event handlers\r\n  #pointerDown = InputHandler.#getPointerDown(this)\r\n  /** @param {InputHandler} inputHandler */\r\n  static #getPointerDown(inputHandler) {\r\n    return (/** @type {PointerEvent}*/ event) => {\r\n      const {offsetX, offsetY, pointerId} = event\r\n      if (event.button === 0) {\r\n        inputHandler.#pointers.set(pointerId, event)\r\n      } else if (event.button === 1) {\r\n        inputHandler.#pointers.set(pointerId, event)\r\n        inputHandler.#setAction({\r\n          type: 'rotatingCube',\r\n          mouse: new V2(offsetX, offsetY)\r\n        })\r\n        return\r\n      }\r\n  \r\n      if (inputHandler.#pointers.size === 1) {\r\n        if (inputHandler.#rubiks.isTurning) {\r\n          return\r\n        }\r\n        if (inputHandler.#action.type === 'none') {\r\n          inputHandler.#actionHovering(offsetX, offsetY)\r\n        }\r\n        if (inputHandler.#action.type === 'hovering') {\r\n          inputHandler.#startActionRotatingSide(offsetX, offsetY, inputHandler.#action.facelet)\r\n          return\r\n        }\r\n        inputHandler.#startActionRotatingCube(offsetX, offsetY)\r\n      } else if (inputHandler.#pointers.size === 2) {\r\n        inputHandler.#startActionGesture()\r\n      }\r\n    }\r\n  }\r\n  #pointerMove = InputHandler.#getPointerMove(this)\r\n  /** @param {InputHandler} inputHandler */\r\n  static #getPointerMove(inputHandler) {\r\n    return (/** @type {PointerEvent} */ event) => {\r\n      const {offsetX, offsetY} = event\r\n  \r\n      if (inputHandler.#pointers.size === 0) {\r\n        inputHandler.#actionHovering(offsetX, offsetY)\r\n        return\r\n      }\r\n      inputHandler.#pointers.set(event.pointerId, event)\r\n  \r\n      inputHandler.#actionRotatingSide(offsetX, offsetY)\r\n      inputHandler.#actionRotatingCube(offsetX, offsetY)\r\n      inputHandler.#actionGesture()\r\n    }\r\n  }\r\n  #pointerUp = InputHandler.#getPointerUp(this)\r\n  /** @param {InputHandler} inputHandler */\r\n  static #getPointerUp(inputHandler) {\r\n    return () => {\r\n      inputHandler.#pointers.clear()\r\n      inputHandler.#setAction({\r\n        type: 'none'\r\n      })\r\n    }\r\n  }\r\n  #pointerLeave = InputHandler.#getPointerLeave(this)\r\n  /** @param {InputHandler} inputHandler */\r\n  static #getPointerLeave(inputHandler) {\r\n    return () => {\r\n      inputHandler.#pointers.clear()\r\n      inputHandler.#setAction({\r\n        type: 'none'\r\n      })\r\n    }\r\n  }\r\n  #wheel = InputHandler.#getWheel(this)\r\n  /** @param {InputHandler} inputHandler */\r\n  static #getWheel(inputHandler) {\r\n    return (/** @type {WheelEvent} */ {deltaY, deltaMode}) => {\r\n      if (deltaMode !== WheelEvent.DOM_DELTA_PIXEL) {\r\n        return\r\n      }\r\n      const d = clamp(deltaY / 102, -1, 1) * .1\r\n      inputHandler.#zoomCube(d)\r\n    }\r\n  }\r\n\r\n  // actions\r\n  // rotating side\r\n  /**\r\n   * @param {number} offsetX\r\n   * @param {number} offsetY\r\n   * @param {import('./facelet').Facelet} hovering\r\n   */\r\n  #startActionRotatingSide(offsetX, offsetY, hovering) {\r\n    const {left, top, topLeft} = hovering.transform\r\n\r\n    const screenTopLeft = this.#camera.worldToScreen(topLeft)\r\n    const screenBottomLeft = this.#camera.worldToScreen(topLeft.add(left))\r\n    const screenTopRight = this.#camera.worldToScreen(topLeft.add(top))\r\n    const rightDir = screenTopRight.sub(screenTopLeft).normalized\r\n    const downDir = screenBottomLeft.sub(screenTopLeft).normalized\r\n\r\n    const rubiksRotation = this.#rubiks.transform\r\n\r\n    const side = hovering.side\r\n    const currentAxis = Math.floor(side / 2)\r\n    const cubie = hovering.transform.parent\r\n    const [axis1, axis2] = [0, 1, 2]\r\n      .filter(axis => axis !== currentAxis)\r\n      .map(axis => {\r\n        const rotationAxis = V3.getRotationAxis(axis)\r\n        const rubiksRotationAxis = rubiksRotation.apply(rotationAxis)\r\n        const index = Math.floor(cubie.index / Math.pow(3, axis)) % 3\r\n        /** @type {import('../types').AxisInfo} */ \r\n        const info = {\r\n          default: rubiksRotationAxis,\r\n          inverted: rubiksRotationAxis.negate,\r\n          axis,\r\n          index\r\n        }\r\n        return info\r\n      })\r\n\r\n    const sideInvertMap = [\r\n      false, true,\r\n      true, false,\r\n      false, true\r\n    ]\r\n    const invert = sideInvertMap[hovering.side]\r\n    \r\n    const mouse = new V2(offsetX, this.#canvas.height - offsetY)\r\n    if (Math.abs(axis1.default.dot(top)) > .99) {\r\n      this.#setAction({\r\n        type: 'rotatingSide',\r\n        mouse,\r\n        down: this.#getTurnDirection(axis1, top, downDir, true !== invert),\r\n        right: this.#getTurnDirection(axis2, left, rightDir, false !== invert),\r\n        side: null,\r\n        facelet: hovering\r\n      })\r\n    } else {\r\n      this.#setAction({\r\n        type: 'rotatingSide',\r\n        mouse,\r\n        down: this.#getTurnDirection(axis2, top, downDir, true !== invert),\r\n        right: this.#getTurnDirection(axis1, left, rightDir, false !== invert),\r\n        side: null,\r\n        facelet: hovering\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} offsetX\r\n   * @param {number} offsetY\r\n   */\r\n  #actionRotatingSide(offsetX, offsetY) {\r\n    if (this.#action.type !== 'rotatingSide') {\r\n      return\r\n    }\r\n\r\n    const mouse = new V2(offsetX, this.#canvas.height - offsetY)\r\n    if (this.#action.mouse.sub(mouse).mag < 10) {\r\n      return\r\n    }\r\n\r\n    const initialMouse = this.#action.mouse\r\n    if (this.#action.side) {\r\n      this.#rotateSide(mouse, this.#action[this.#action.side], initialMouse)\r\n      return\r\n    }\r\n\r\n    const {right, down} = this.#action\r\n    const mouseDir = mouse.sub(initialMouse).normalized\r\n    const rightDot = right.dir.dot(mouseDir)\r\n    const downDot = down.dir.dot(mouseDir)\r\n    if (Math.abs(rightDot) > Math.abs(downDot)) {\r\n      this.#action.side = 'right'\r\n      this.#rubiks.startRotation(right.cubies, right.rotationAxis)\r\n      this.#rotateSide(mouse, right, initialMouse)\r\n    } else {\r\n      this.#action.side = 'down'\r\n      this.#rubiks.startRotation(down.cubies, down.rotationAxis)\r\n      this.#rotateSide(mouse, down, initialMouse)\r\n    }\r\n  }\r\n  // rotating cube\r\n  /**\r\n   * @param {number} offsetX\r\n   * @param {number} offsetY\r\n   */\r\n  #startActionRotatingCube(offsetX, offsetY) {\r\n    this.#setAction({\r\n      type: 'rotatingCube',\r\n      mouse: new V2(offsetX, offsetY)\r\n    })\r\n  }\r\n  /**\r\n   * @param {number} offsetX\r\n   * @param {number} offsetY\r\n   */\r\n  #actionRotatingCube(offsetX, offsetY) {\r\n    if (this.#action.type !== 'rotatingCube') {\r\n      return\r\n    }\r\n\r\n    const mouse = new V2(offsetX, offsetY)\r\n    const delta = mouse.sub(this.#action.mouse)\r\n    this.#action.mouse = mouse\r\n    this.#rotateCube(delta)\r\n  }\r\n  // two pointer gesture\r\n  #startActionGesture() {\r\n    const [e1, e2] = this.#pointers.values()\r\n    const dx = e1.screenX - e2.screenX\r\n    const dy = e1.screenY - e2.screenY\r\n    this.#setAction({\r\n      type: 'gesture',\r\n      distance: dx * dx + dy * dy,\r\n      center: new V2(e1.screenX + e2.screenX, e1.screenY + e2.screenY).scale(.5)\r\n    })\r\n  }\r\n  #actionGesture() {\r\n    if (this.#action.type !== 'gesture') {\r\n      return\r\n    }\r\n\r\n    const [e1, e2] = this.#pointers.values()\r\n\r\n    const dx = e1.screenX - e2.screenX\r\n    const dy = e1.screenY - e2.screenY\r\n    const distance = dx * dx + dy * dy\r\n    const deltaDistance = distance - this.#action.distance\r\n    this.#action.distance = distance\r\n    const d = clamp(deltaDistance / 1000, -1, 1) * -.02\r\n    this.#zoomCube(d)\r\n\r\n    const center = new V2(e1.screenX + e2.screenX, e1.screenY + e2.screenY).scale(.5)\r\n    const deltaCenter = center.sub(this.#action.center)\r\n    this.#action.center = center\r\n    this.#rotateCube(deltaCenter)\r\n  }\r\n  // hovering\r\n  /**\r\n   * @param {number} offsetX\r\n   * @param {number} offsetY\r\n   */\r\n  #actionHovering(offsetX, offsetY) {\r\n    const ray = new Ray(this.#camera, offsetX, offsetY, window.innerWidth, window.innerHeight)\r\n    const facelets = ray.intersectRubiks(this.#rubiks)\r\n    if (facelets.length) {\r\n      facelets.sort((a, b) => a.d - b.d)\r\n      this.#setAction({\r\n        type: 'hovering',\r\n        facelet: facelets[0].facelet\r\n      })\r\n    } else {\r\n      this.#setAction({\r\n        type: 'none'\r\n      })\r\n    }\r\n  }\r\n\r\n  // action helpers\r\n  // rotating side\r\n  /**\r\n   * @param {import('../types').AxisInfo} axisInfo\r\n   * @param {V3} vector\r\n   * @param {V2} dir\r\n   * @param {boolean} invert\r\n   * @returns {import('../types').SideInfo}\r\n   */\r\n  #getTurnDirection(axisInfo, vector, dir, invert) {\r\n    if (axisInfo.default.dot(vector) > .99)\r\n      return {\r\n        dir,\r\n        angle: 0,\r\n        axis: axisInfo.axis,\r\n        rotationAxis: V3.getRotationAxis(axisInfo.axis).scale(invert ? -1 : 1),\r\n        index: axisInfo.index,\r\n        cubies: this.#rubiks.getPlane(axisInfo.axis, axisInfo.index)\r\n      }\r\n\r\n    return {\r\n      dir,\r\n      angle: 0,\r\n      axis: axisInfo.axis,\r\n      rotationAxis: V3.getRotationAxis(axisInfo.axis).scale(invert ? 1 : -1),\r\n      index: axisInfo.index,\r\n      cubies: this.#rubiks.getPlane(axisInfo.axis, axisInfo.index)\r\n    }\r\n  }\r\n  /**\r\n   * @param {V2} mouse\r\n   * @param {import('../types').SideInfo} info\r\n   * @param {V2} initialMouse\r\n   */\r\n  #rotateSide(mouse, info, initialMouse) {\r\n    const length = info.dir.dot(initialMouse.sub(mouse))\r\n    const zoom = this.#getZoom()\r\n    info.angle = length / (3 - zoom * 2)\r\n    this.#rubiks.rotateManual(info.angle)\r\n  }\r\n  // rotating cube\r\n  /** @param {V2} delta */\r\n  #rotateCube(delta) {\r\n    if (delta.x === 0 && delta.y === 0) {\r\n      return\r\n    }\r\n\r\n    const n = this.#camera.up.scale(delta.y).add(this.#camera.right.scale(delta.x))\r\n    const axis = this.#camera.forward.cross(n)\r\n    const zoom = this.#getZoom()\r\n    const angle = Math.sqrt(delta.x * delta.x + delta.y * delta.y) * .3 + 2 * zoom\r\n    this.#rubiks.transform.rotate(axis, angle)\r\n  }\r\n  // zooming camera\r\n  /** @param {number} d */\r\n  #zoomCube(d) {\r\n    const {position} = this.#camera\r\n    this.#camera.position = new V3(0, 0, clamp(position.z * (1 + d), -this.#maxZoom, -this.#minZoom))\r\n  }\r\n  #getZoom() {\r\n    const zoom = -this.#camera.position.z\r\n    const minZoom = this.#minZoom\r\n    const maxZoom = this.#maxZoom\r\n    return (zoom - minZoom) / (maxZoom - minZoom)\r\n  }\r\n}", "import {V2} from '../math/vector'\r\n\r\nclass Debugger {\r\n  /** @type {CanvasRenderingContext2D?} */\r\n  #ctx\r\n  /** @type {HTMLCanvasElement?} */\r\n  #canvas\r\n\r\n  #strokeColor = 'white'\r\n  #fillColor = 'white'\r\n\r\n  /**\r\n   * @param {Element?} canvas\r\n   */\r\n  constructor(canvas) {\r\n    if (!canvas) {\r\n      return\r\n    }\r\n\r\n    if (!(canvas instanceof HTMLCanvasElement)) {\r\n      throw new Error(`rubiks cube debugger is not a canvas, it is a <${canvas.tagName}>`)\r\n    }\r\n    this.#canvas = canvas\r\n\r\n    const ctx = canvas.getContext('2d')\r\n    if (!ctx)\r\n      throw new Error('cannot create 2d context for rubiks cube debugger')\r\n    this.#ctx = ctx\r\n  }\r\n\r\n  clear() {\r\n    if (this.#ctx && this.#canvas) {\r\n      this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height)\r\n    }\r\n  }\r\n\r\n  /** @param {string} color */\r\n  stroke(color) {\r\n    this.#strokeColor = color\r\n  }\r\n  \r\n  /** @param {string} color */\r\n  fill(color) {\r\n    this.#fillColor = color\r\n  }\r\n\r\n  /**\r\n   * @param {V2} from\r\n   * @param {V2} to\r\n   */\r\n  line(from, to) {\r\n    if (this.#ctx && this.#canvas) {\r\n      this.#ctx.strokeStyle = this.#strokeColor\r\n      this.#ctx.lineWidth = 3\r\n      const fromF = Debugger.#flipVector(from, this.#canvas)\r\n      const toF = Debugger.#flipVector(to, this.#canvas)\r\n      this.#ctx.beginPath()\r\n      this.#ctx.moveTo(fromF.x, fromF.y)\r\n      this.#ctx.lineTo(toF.x, toF.y)\r\n      this.#ctx.stroke()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {V2} origin\r\n   * @param {V2} direction\r\n   * @param {number} [length=1]\r\n   */\r\n  vector(origin, direction, length = 1) {\r\n    this.line(origin, origin.add(direction.scale(length)))\r\n  }\r\n\r\n  /**\r\n   * @param {number} width\r\n   * @param {number} height\r\n   */\r\n  setSize(width, height) {\r\n    if (this.#canvas) {\r\n      this.#canvas.width = width\r\n      this.#canvas.height = height\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {V2} v\r\n   * @param {HTMLCanvasElement} canvas\r\n   */\r\n  static #flipVector({x, y}, canvas) {\r\n    return new V2(x, canvas.height - y)\r\n  }\r\n\r\n  /**\r\n   * @param {V2} pos\r\n   * @param {string} text\r\n   */\r\n  text(pos, text) {\r\n    if (this.#ctx) {\r\n      this.#ctx.fillStyle = this.#fillColor\r\n      this.#ctx.fillText(text, pos.x, pos.y)\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default new Debugger(document.querySelector('[data-rubiks-cube-debug]'))", "export const vertex = `#version 300 es\r\n\r\nlayout (location = 0) in vec3 aPos;\r\nlayout (location = 1) in vec2 aUV;\r\n\r\nout vec2 uv;\r\nout vec2 pos;\r\n\r\nuniform mat4 model;\r\nuniform mat4 view;\r\nuniform mat4 projection;\r\n\r\nvoid main()\r\n{\r\n    gl_Position = projection * view * model * vec4(aPos, 1.0);\r\n    uv = aUV;\r\n    pos = aPos.yz;\r\n}`\r\n\r\nexport const fragment = `#version 300 es\r\n\r\nprecision mediump float;\r\n\r\nin vec2 uv;\r\nin vec2 pos;\r\n\r\nout vec4 FragColor;\r\n\r\nuniform sampler2D tex;\r\nuniform vec3 colorMult;\r\n\r\nvec3 rime = vec3(0.07);\r\nfloat outer = 0.45;\r\nfloat inner = 0.44;\r\n\r\nfloat map(float value, float min1, float max1, float min2, float max2)\r\n{\r\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\r\n}\r\n\r\nvoid main()\r\n{\r\n    float x = abs(pos.x);\r\n    float y = abs(pos.y);\r\n    if (x > outer || y > outer) {\r\n        FragColor = vec4(rime, 1.0);\r\n        return;\r\n    }\r\n    vec3 color = texture(tex, uv).rgb * colorMult;\r\n    if (x > inner || y > inner) {\r\n        float t = smoothstep(0.0, 1.0, map(max(x, y), outer, inner, 0.0, 1.0));\r\n        vec3 c = color * t + rime * (1.0 - t);\r\n        FragColor = vec4(c, 1.0);\r\n        return;\r\n    }\r\n    FragColor = vec4(color, 1.0);\r\n}`", "export class ChangeEvent {\r\n\t/**\r\n\t * Axis that was turned around\r\n\t * \r\n\t * 0 => x-axis (from right to left)\r\n\t * \r\n\t * 1 => y-axis (from bottom to top)\r\n\t * \r\n\t * 2 => z-axis (from front to back)\r\n\t * @type {0 | 1 | 2}\r\n\t */\r\n\taxis\r\n\t/**\r\n\t * The slice on the axis. Example using axis = 0:\r\n\t * \r\n\t * 0 => Left slice\r\n\t * \r\n\t * 2 => Right slice\r\n\t * \r\n\t * The middle layer is never turned. Instead both outer layers are turn\r\n\t * in the opposite direction. This has the same effect.\r\n\t * That way the centers always stay in the same position.\r\n\t * @type {0 | 2}\r\n\t */\r\n\tindex\r\n\t/**\r\n\t * Important: The angle is always clockwise around the axis and not\r\n\t * clockwise around the turning side. This means that R and L' both\r\n\t * have an angle of 1\r\n\t * @type {1 | 2 | 3}\r\n\t */\r\n\tangle\r\n\t/**\r\n\t * @type {import('./state/types').Turn}\r\n\t */\r\n\tturn\r\n\t/**\r\n\t * @type {import('./state').StateInfo}\r\n\t */\r\n\tstate\r\n\r\n\t/**\r\n\t * @param {number} axis\r\n\t * @param {number} index\r\n\t * @param {number} angle\r\n\t * @param {import('./state/types').Turn} turn\r\n\t * @param {import('./state').StateInfo} state\r\n\t */\r\n\tconstructor(axis, index, angle, turn, state) {\r\n\t\tthis.axis = /** @type {0 | 1 | 2} */ (axis)\r\n\t\tthis.index = /** @type {0 | 2} */ (index)\r\n\t\tthis.angle = /** @type {1 | 2 | 3} */ (angle)\r\n\t\tthis.turn = turn\r\n\t\tthis.state = state\r\n\t}\r\n}", "import {V3} from './math/vector'\r\nimport {Quaternion} from './math/quarternion'\r\n\r\nimport {Program} from './ui/program'\r\nimport {Camera} from './ui/camera'\r\nimport {Rubiks} from './ui/rubiks'\r\nimport {InputHandler} from './ui/inputHandler'\r\nimport debug from './ui/debugger'\r\n\r\nimport {vertex, fragment} from './shaders/facelet.glsl'\r\n\r\nimport {State} from './state'\r\n\r\nimport {convertAiaToTurn} from './converter'\r\n\r\nimport {ChangeEvent} from './events'\r\n\r\n\r\n/** @typedef {import('./types').Events} Events */\r\n\r\nexport class RubiksCube {\r\n  #initialized = false\r\n  \r\n\t/** @type {WebGL2RenderingContext} */\r\n  #gl\r\n\t/** @type {HTMLCanvasElement} */\r\n  #canvas\r\n\t/** @type {Program} */\r\n  #program\r\n\t/** @type {WebGLVertexArrayObject} */\r\n  #vao\r\n\t/** @type {WebGLBuffer} */\r\n  #uvsVbo\r\n\t/** @type {WebGLTexture} */\r\n  #texture\r\n\r\n\t/** @type {Camera} */\r\n  #camera\r\n\t/** @type {Rubiks} */\r\n  #rubiks\r\n\t/** @type {InputHandler} */\r\n  #inputHandler\r\n  /** @type {State} */\r\n  #state\r\n  /** @type {boolean} */\r\n  #trackCenters\r\n\r\n  #frame = 0\r\n  #resizeHandler = RubiksCube.#getResizeHandler(this)\r\n\r\n\t/** @type {string} */\r\n\t#canvasData\r\n\t/** @type {ImageData | HTMLImageElement} */\r\n\t#image\r\n\t/** @type {number[][][]} */\r\n\t#uvs\r\n\t/** @type {number[][]} */\r\n\t#hoveringColors\r\n\r\n\t/**\r\n\t * @param {string} canvasData\r\n\t * @param {ImageData | HTMLImageElement} image\r\n\t * @param {number[][][]} uvs\r\n\t * @param {number[][]} hoveringColors\r\n   * @param {boolean} trackCenters\r\n\t */\r\n  constructor(canvasData, image, uvs, hoveringColors, trackCenters) {\r\n\t\tthis.#canvasData = canvasData\r\n\t\tthis.#image = image\r\n\t\tthis.#uvs = uvs\r\n\t\tthis.#hoveringColors = hoveringColors\r\n    this.#trackCenters = trackCenters\r\n\t}\r\n\r\n  /**\r\n   * Starts rendering the cube and listening for user inputs.\r\n   * Automaticly initializes webgl and pointer event listeners.\r\n   */\r\n  start() {\r\n    if (!this.#initialized) {\r\n      this.#initialize()\r\n      this.#initialized = true\r\n    }\r\n\r\n    this.#inputHandler.addEventListeners()\r\n  \r\n    window.addEventListener('resize', this.#resizeHandler)\r\n    this.#resizeHandler()\r\n\r\n    this.#program.use()\r\n    this.#gl.bindVertexArray(this.#vao)\r\n\r\n    this.#gl.activeTexture(this.#gl.TEXTURE0)\r\n    this.#gl.bindTexture(this.#gl.TEXTURE_2D, this.#texture)\r\n    this.#program.uniform('tex', {\r\n      setUniform: (gl, location) => gl.uniform1i(location, 0)\r\n    })\r\n\r\n    let lastTime = Date.now()\r\n    const loop = () => {\r\n      const currentTime = Date.now()\r\n      const deltaTime = (currentTime - lastTime) / 1000\r\n      lastTime = currentTime\r\n    \r\n      this.#gl.clear(this.#gl.COLOR_BUFFER_BIT | this.#gl.DEPTH_BUFFER_BIT)\r\n    \r\n      this.#program.uniform('view', this.#camera.worldToCameraMatrix)\r\n      this.#program.uniform('projection', this.#camera.projectionMatrix)\r\n    \r\n      this.#rubiks.render(this.#program, this.#gl, this.#uvsVbo)\r\n      this.#rubiks.update(deltaTime)\r\n    \r\n      this.#frame = requestAnimationFrame(loop)\r\n    }\r\n    this.#frame = requestAnimationFrame(loop)\r\n  }\r\n\r\n  /**\r\n   * Stops rendering the cube and removes all listeners.\r\n   */\r\n  stop() {\r\n    window.removeEventListener('resize', this.#resizeHandler)\r\n    cancelAnimationFrame(this.#frame)\r\n    this.#inputHandler.removeEventListeners()\r\n  }\r\n\r\n  /**\r\n   * Resets the internal state and applys it to the cube.\r\n   */\r\n  reset() {\r\n    this.#state.reset()\r\n    this.#state.applyState(this.#uvs, this.#rubiks)\r\n  }\r\n\r\n  /**\r\n   * @param {string} stateStr a base46 representation\r\n   * @returns {boolean} false if `stateStr` was invalid\r\n   */\r\n  setState(stateStr) {\r\n    if (!this.#initialized) {\r\n      this.#initialize()\r\n      this.#initialized = true\r\n    }\r\n\r\n    if (!this.#state.decode(stateStr)) {\r\n      return false\r\n    }\r\n\r\n    this.#state.applyState(this.#uvs, this.#rubiks)\r\n    return true\r\n  }\r\n\r\n\t/**\r\n\t * @param {RubiksCube} rubiksCube\r\n\t\t* @returns {() => void}\r\n\t */\r\n  static #getResizeHandler(rubiksCube) {\r\n    return () => {\r\n      const width = window.innerWidth\r\n      const height = window.innerHeight\r\n    \r\n      debug.setSize(width, height)\r\n    \r\n      rubiksCube.#canvas.width = width\r\n      rubiksCube.#canvas.height = height\r\n      rubiksCube.#gl.viewport(0, 0, width, height)\r\n    \r\n      rubiksCube.#camera.screenSize(width, height)\r\n    }\r\n  }\r\n\r\n  #initialize() {\r\n    const canvas = document.querySelector(`[${this.#canvasData}]`)\r\n    if (!canvas) {\r\n      throw new Error(`<canvas ${this.#canvasData}> does not exist`)\r\n    }\r\n    if (!(canvas instanceof HTMLCanvasElement)) {\r\n      throw new Error(`<canvas ${this.#canvasData}> is not a canvas, it is a <${canvas.tagName}>`)\r\n    }\r\n    this.#canvas = canvas\r\n\r\n    const gl = canvas.getContext('webgl2')\r\n    if (!gl) {\r\n      throw new Error(`cannot create webgl2 context`)\r\n    }\r\n    this.#gl = gl\r\n\r\n    gl.enable(gl.DEPTH_TEST)\r\n    gl.depthFunc(gl.LESS)\r\n    \r\n    this.#program = new Program('rubiksCube/shaders/facelet.glsl', vertex, fragment, gl)\r\n\r\n    const vao = gl.createVertexArray()\r\n    if (!vao) {\r\n      throw new Error('could not create a webgl vertex array object')\r\n    }\r\n    this.#vao = vao\r\n    gl.bindVertexArray(vao)\r\n\r\n    const vertices = [\r\n      0, -.5, -.5,\r\n      0, -.5,  .5,\r\n      0,  .5,  .5,\r\n      0,  .5, -.5\r\n    ]\r\n    const verticesBuffer = new Float32Array(vertices)\r\n    const verticesVbo = gl.createBuffer()\r\n\r\n    const indices = [\r\n      0, 1, 3,\r\n      1, 3, 2\r\n    ]\r\n    const indicesBuffer = new Int8Array(indices)\r\n    const ebo = gl.createBuffer()\r\n\r\n    const uvsVbo = gl.createBuffer()\r\n\r\n    if (!verticesVbo || !ebo || !uvsVbo) {\r\n      throw new Error('could not create a vertex buffer objects')\r\n    }\r\n    this.#uvsVbo = uvsVbo\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo)\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indicesBuffer, gl.STATIC_DRAW)\r\n    \r\n    gl.bindBuffer(gl.ARRAY_BUFFER, verticesVbo)\r\n    gl.bufferData(gl.ARRAY_BUFFER, verticesBuffer, gl.STATIC_DRAW)\r\n    \r\n    gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 12, 0)\r\n    gl.enableVertexAttribArray(0)\r\n    gl.enableVertexAttribArray(1)\r\n\r\n    gl.bindVertexArray(null)\r\n\r\n    const texture = gl.createTexture()\r\n    if (!texture) {\r\n      throw new Error('could not create a texture')\r\n    }\r\n    this.#texture = texture\r\n    gl.bindTexture(gl.TEXTURE_2D, texture)\r\n    gl.texImage2D(\r\n      gl.TEXTURE_2D,\r\n      0,\r\n      gl.RGBA,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      this.#image\r\n    )\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\r\n    gl.bindTexture(gl.TEXTURE_2D, null)\r\n\r\n    const hoveringColors = this.#hoveringColors.map(([r, g, b]) => new V3(r, g, b))\r\n    this.#camera = new Camera(new V3(0, 0, -10), V3.zero, V3.up, 45, window.innerWidth, window.innerHeight, .1, 100)\r\n    this.#rubiks = new Rubiks(Quaternion.identity, this.#uvs, hoveringColors, this.#turnHandler.bind(this))\r\n    this.#inputHandler = new InputHandler(canvas, this.#rubiks, this.#camera)\r\n    this.#state = new State(this.#trackCenters)\r\n  }\r\n\r\n  get transform() {\r\n    return this.#rubiks.transform\r\n  }\r\n\r\n\t/** @type {Map<keyof Events, Set<(event: any) => void>>} */\r\n  #listeners = new Map()\r\n\t/**\r\n\t * @template {keyof Events} Name\r\n\t * @param {Name} name\r\n\t * @param {(event: Events[Name]) => void} callback\r\n\t */\r\n  on(name, callback) {\r\n    const set = this.#listeners.get(name) ?? new Set()\r\n    set.add(callback)\r\n    this.#listeners.set(name, set)\r\n  }\r\n\t/**\r\n\t * @param {import('./types').AIA} aia\r\n\t */\r\n  #turnHandler(aia) {\r\n    const turn = convertAiaToTurn(aia)\r\n    this.#state.applyTurn(turn)\r\n    \r\n    /** @type {Set<(event: Events['change']) => void> | undefined} */\r\n    const changeHandlers = this.#listeners.get('change')\r\n    if (changeHandlers) {\r\n      const event = new ChangeEvent(\r\n        aia.axis,\r\n        aia.index,\r\n        aia.angle,\r\n        turn,\r\n        this.#state.stateInfo\r\n      )\r\n      for (const callback of changeHandlers) {\r\n        callback(event)\r\n      }\r\n    }\r\n  }\r\n}", "export {RubiksCube} from './rubiksCube'\r\n\r\nexport const defaultTexture = new ImageData(new Uint8ClampedArray([\r\n  0,   0, 255, 255,\r\n  0, 255,   0, 255,\r\n255, 255,   0, 255,\r\n255, 255, 255, 255,\r\n255,   0,   0, 255,\r\n255, 127,   0, 255\r\n]), 1, 6)\r\n\r\n/** @type {number[][][]} */\r\nexport const defaultUVs = Array(6).fill(null).map((_, index) => {\r\n  return Array(9).fill([\r\n    0, (index + 0) / 6,\r\n    1, (index + 0) / 6,\r\n    1, (index + 1) / 6,\r\n    0, (index + 1) / 6\r\n  ])\r\n})\r\n\r\n/** @type {number[][]} */\r\nexport const defaultHovorvingColors = Array(6).fill(Array(3).fill(.7))"],
  "mappings": "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",
  "names": ["_a", "index", "_a", "_b", "_c", "_d", "_e", "rotationAxis", "_canvas", "_a", "_b", "_a", "_canvas", "_camera", "_rubiks"]
}
